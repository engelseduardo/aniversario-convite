<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Convite de Anivers√°rio - Engels</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET MOBILE-FIRST */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
        }
        
        :root {
            --primary: #7c3aed;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: #64748b;
            --radius: 12px;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.5;
            overflow-x: hidden;
            position: relative;
        }
        
        /* CANVAS OTIMIZADO PARA MOBILE */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            display: block;
        }
        
        /* OVERLAY DE BRILHO OTIMIZADO */
        .light-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.5s ease;
            background: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                rgba(255, 215, 0, 0.15) 0%,
                rgba(255, 140, 0, 0.1) 25%,
                transparent 60%
            );
            mix-blend-mode: screen;
        }
        
        /* CONTAINER MOBILE-FIRST */
        .container {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            padding: 12px;
            position: relative;
            z-index: 10;
            padding-bottom: 80px; /* Espa√ßo para controles mobile */
        }
        
        /* HEADER MOBILE */
        .header {
            text-align: center;
            padding: 20px 15px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius);
            margin-bottom: 15px;
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }
        
        .logo {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--light);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 10px;
        }
        
        .header h1 {
            font-size: 1.3rem;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .header h2 {
            font-size: 0.95rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
        }
        
        .date-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.08);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            border: 1px solid var(--glass-border);
        }
        
        /* SE√á√ïES MOBILE */
        .section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 18px 15px;
            margin-bottom: 15px;
            border: 1px solid var(--glass-border);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--secondary);
            font-size: 1.15rem;
        }
        
        /* INFO CARDS */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .info-card {
            background: rgba(30, 41, 59, 0.3);
            border-radius: var(--radius);
            padding: 15px;
            border: 1px solid var(--glass-border);
            transition: var(--transition);
        }
        
        .info-card:hover {
            transform: translateY(-2px);
        }
        
        .info-card h3 {
            color: var(--light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        /* PRESENTES */
        .gift-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .gift-card {
            background: rgba(30, 41, 59, 0.3);
            border-radius: var(--radius);
            padding: 15px;
            border: 1px solid var(--glass-border);
            position: relative;
        }
        
        .gift-card.reserved {
            border-color: var(--secondary);
            background: rgba(16, 185, 129, 0.1);
        }
        
        .gift-card.reserved::after {
            content: '‚úì RESERVADO';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--secondary);
            color: white;
            padding: 3px 8px;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: 4px;
        }
        
        .gift-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .gift-icon {
            background: rgba(124, 58, 237, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            flex-shrink: 0;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
        }
        
        .reserve-btn, .cancel-btn {
            border: none;
            padding: 12px 0;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
            font-size: 0.9rem;
        }
        
        .reserve-btn {
            background: var(--secondary);
            color: white;
        }
        
        .cancel-btn {
            background: var(--danger);
            color: white;
        }
        
        /* CONTROLES MOBILE FIXOS */
        .mobile-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            display: flex;
            justify-content: space-around;
            padding: 12px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .control-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .control-btn.launch {
            background: var(--accent);
            border-color: var(--accent);
        }
        
        /* CONTADOR MOBILE */
        .reservation-counter-mobile {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .counter-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--secondary);
        }
        
        .counter-label {
            font-size: 0.6rem;
            color: var(--gray);
        }
        
        /* BOT√ÉO WHATSAPP MOBILE */
        .whatsapp-btn-mobile {
            position: fixed;
            bottom: 70px;
            right: 15px;
            z-index: 100;
            background: #25D366;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            padding: 20px 15px;
            color: var(--gray);
            font-size: 0.85rem;
            border-top: 1px solid var(--glass-border);
            margin-top: 20px;
        }
        
        /* RESPONSIVIDADE PARA TABLET/DESKTOP */
        @media (min-width: 640px) {
            .container {
                max-width: 600px;
                padding: 20px;
            }
            
            .info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gift-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .mobile-controls {
                padding: 15px;
                justify-content: center;
                gap: 30px;
            }
            
            .control-btn {
                width: 55px;
                height: 55px;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 700px;
            }
            
            .mobile-controls {
                display: none;
            }
            
            .whatsapp-btn-mobile {
                display: none;
            }
            
            /* CONTROLES DESKTOP */
            .desktop-controls {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 100;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            .desktop-fireworks-btn {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid var(--glass-border);
                color: white;
                padding: 10px 20px;
                border-radius: 50px;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .whatsapp-btn-desktop {
                background: #25D366;
                color: white;
                border: none;
                padding: 12px 25px;
                border-radius: 50px;
                font-weight: 600;
                cursor: pointer;
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 10px;
                margin-top: 20px;
            }
        }
        
        @media (min-width: 1024px) {
            .container {
                max-width: 800px;
            }
            
            .gift-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* ANIMA√á√ïES */
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .celebrate {
            animation: celebrate 0.3s ease;
        }
        
        /* UTILIT√ÅRIOS */
        .hidden {
            display: none !important;
        }
        
        /* MELHORAR TOUCH NO MOBILE */
        @media (max-width: 768px) {
            button, a {
                min-height: 44px; /* Tamanho m√≠nimo para touch */
            }
        }
    </style>
</head>
<body>
    <!-- Canvas para fogos de artif√≠cio -->
    <canvas id="fireworksCanvas"></canvas>
    
    <!-- Overlay de brilho -->
    <div class="light-overlay" id="lightOverlay"></div>
    
    <!-- Contador de reservas mobile -->
    <div class="reservation-counter-mobile" id="reservationCounterMobile">
        <span class="counter-number" id="mobileReservationNumber">0</span>
        <span class="counter-label">/10</span>
    </div>
    
    <!-- Bot√£o WhatsApp Mobile -->
    <a href="https://wa.me/5551984238876?text=Ol√°%20Engels!%20Confirmo%20minha%20presen√ßa%20no%20seu%20anivers√°rio%20e%20ch√°%20de%20casa%20nova%20dia%206%20de%20fevereiro!"
       class="whatsapp-btn-mobile"
       target="_blank">
        <i class="fab fa-whatsapp"></i>
        Confirmar
    </a>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-gift"></i>
                <span>Anivers√°rio & Ch√° de Casa Nova</span>
            </div>
            <h1>Convite Especial</h1>
            <h2>Engels Eduardo Cenci</h2>
            <div class="date-badge">
                <i class="fas fa-calendar-alt"></i>
                <span>6 de fevereiro (sexta-feira) - √Ä noite</span>
            </div>
        </header>
        
        <!-- Informa√ß√µes -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i>
                Informa√ß√µes
            </h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3><i class="fas fa-map-marked-alt"></i> Local</h3>
                    <p>"Casa da minha m√£e"</p>
                    <small>Endere√ßo via WhatsApp ap√≥s confirma√ß√£o</small>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-glass-cheers"></i> Celebra√ß√£o Dupla</h3>
                    <p><strong>6 de fevereiro:</strong> Ch√° de Casa Nova</p>
                    <p><strong>5 de fevereiro:</strong> Anivers√°rio</p>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-clock"></i> Hor√°rio</h3>
                    <p><strong>Sexta-feira</strong></p>
                    <p>A partir das 19:00</p>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-utensils"></i> O que ter√°</h3>
                    <p>‚Ä¢ Salchip√£o</p>
                    <p>‚Ä¢ M√∫sica animada</p>
                    <p>‚Ä¢ Boa companhia</p>
                </div>
            </div>
        </section>
        
        <!-- Presentes -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-gifts"></i>
                Sugest√µes de Presentes
            </h2>
            
            <div style="background: rgba(245, 158, 11, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                <p style="font-size: 0.9rem;"><strong>Como funciona:</strong> Clique em "Reservar" para escolher um presente. Se mudar de ideia, clique em "Desmarcar".</p>
            </div>
            
            <div class="gift-grid" id="giftGrid">
                <!-- Presentes ser√£o inseridos via JavaScript -->
            </div>
        </section>
        
        <!-- Confirma√ß√£o Desktop -->
        <div class="hidden" id="desktopConfirmation">
            <a href="https://wa.me/5551984238876?text=Ol√°%20Engels!%20Confirmo%20minha%20presen√ßa%20no%20seu%20anivers√°rio%20e%20ch√°%20de%20casa%20nova%20dia%206%20de%20fevereiro!"
               class="whatsapp-btn-desktop"
               target="_blank">
                <i class="fab fa-whatsapp"></i>
                Confirmar pelo WhatsApp
            </a>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <p>Desenvolvido com <i class="fas fa-heart" style="color: #ef4444;"></i> por Engels Eduardo Cenci</p>
            <p style="font-size: 0.8rem; margin-top: 5px;">Anivers√°rio + Ch√° de Casa Nova | 6 de fevereiro</p>
        </footer>
    </div>
    
    <!-- Controles Mobile -->
    <div class="mobile-controls">
        <button class="control-btn" id="toggleFireworksMobile" title="Ligar/Desligar fogos">
            <i class="fas fa-fire" id="fireworksIconMobile"></i>
        </button>
        <button class="control-btn launch" id="launchFireworksMobile" title="Lan√ßar fogos agora">
            <i class="fas fa-bolt"></i>
        </button>
    </div>

    <!-- Controles Desktop (oculto no mobile) -->
    <div class="desktop-controls hidden" id="desktopControls">
        <button class="desktop-fireworks-btn" id="toggleFireworksDesktop">
            <i class="fas fa-fire" id="fireworksIconDesktop"></i>
            <span id="fireworksStatusDesktop">Fogos: ON</span>
        </button>
        <button class="desktop-fireworks-btn launch" id="launchFireworksDesktop">
            <i class="fas fa-bolt"></i>
            <span>Lan√ßar Fogos</span>
        </button>
    </div>

    <script>
        // SISTEMA DE FOGOS DE ARTIF√çCIO OTIMIZADO E REALISTA
        class OptimizedFireworks {
            constructor() {
                this.canvas = document.getElementById('fireworksCanvas');
                this.ctx = this.canvas.getContext('2d', { alpha: true });
                this.particles = [];
                this.fireworks = [];
                this.isActive = true;
                this.animationId = null;
                this.lastFrameTime = 0;
                this.fps = 60;
                this.frameInterval = 1000 / this.fps;
                this.lastUpdateTime = 0;
                
                // Configura√ß√µes otimizadas para mobile
                this.config = {
                    maxParticles: 150, // Reduzido para melhor performance
                    maxFireworks: 5,   // M√°ximo de fogos simult√¢neos
                    gravity: 0.1,
                    wind: 0.01,
                    particleFadeSpeed: 0.02,
                    trailLength: 5
                };
                
                // Cores vibrantes e realistas
                this.colors = [
                    '#FF5252', // Vermelho vibrante
                    '#4FC3F7', // Azul claro
                    '#69F0AE', // Verde claro
                    '#FFD740', // Amarelo
                    '#FF4081', // Rosa
                    '#7C4DFF', // Roxo
                    '#FF6E40', // Laranja
                    '#18FFFF'  // Ciano
                ];
                
                this.init();
            }
            
            init() {
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                this.startAnimation();
                
                // Lan√ßar alguns fogos iniciais
                setTimeout(() => this.launchInitialFireworks(), 500);
            }
            
            resizeCanvas() {
                const dpr = window.devicePixelRatio || 1;
                const rect = this.canvas.getBoundingClientRect();
                
                this.canvas.width = rect.width * dpr;
                this.canvas.height = rect.height * dpr;
                
                this.ctx.scale(dpr, dpr);
                this.canvas.style.width = rect.width + 'px';
                this.canvas.style.height = rect.height + 'px';
            }
            
            startAnimation() {
                const animate = (currentTime) => {
                    this.animationId = requestAnimationFrame(animate);
                    
                    // Controlar FPS
                    const deltaTime = currentTime - this.lastFrameTime;
                    if (deltaTime < this.frameInterval) return;
                    
                    this.lastFrameTime = currentTime - (deltaTime % this.frameInterval);
                    
                    // Limpar canvas com efeito de rastro suave
                    this.ctx.fillStyle = 'rgba(15, 23, 42, 0.08)';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                    
                    // Atualizar e desenhar
                    this.update(currentTime);
                    this.draw();
                };
                
                this.animationId = requestAnimationFrame(animate);
            }
            
            update(currentTime) {
                // Limitar n√∫mero de part√≠culas para evitar travamento
                if (this.particles.length > this.config.maxParticles) {
                    this.particles.splice(0, this.particles.length - this.config.maxParticles);
                }
                
                // Atualizar fogos
                for (let i = this.fireworks.length - 1; i >= 0; i--) {
                    const fw = this.fireworks[i];
                    
                    // F√≠sica realista do fogo subindo
                    fw.velocity.y -= fw.speed * 0.1;
                    fw.x += Math.sin(fw.angle) * 0.5;
                    fw.y += fw.velocity.y;
                    
                    // Adicionar part√≠culas de rastro
                    if (Math.random() > 0.7) {
                        this.addTrailParticle(fw.x, fw.y, fw.color);
                    }
                    
                    // Verificar explos√£o
                    if (fw.velocity.y >= 0 || fw.y <= fw.targetY) {
                        this.explodeFirework(fw);
                        this.fireworks.splice(i, 1);
                    }
                }
                
                // Atualizar part√≠culas
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    const p = this.particles[i];
                    
                    // F√≠sica realista
                    p.velocity.x += (Math.random() - 0.5) * 0.1;
                    p.velocity.y += this.config.gravity;
                    p.x += p.velocity.x;
                    p.y += p.velocity.y;
                    
                    // Efeito de desvanecimento
                    p.alpha -= this.config.particleFadeSpeed;
                    p.size *= 0.97;
                    
                    // Remover part√≠culas desvanecidas
                    if (p.alpha <= 0 || p.size <= 0.1) {
                        this.particles.splice(i, 1);
                    }
                }
            }
            
            draw() {
                // Desenhar part√≠culas
                this.ctx.globalCompositeOperation = 'lighter';
                
                this.particles.forEach(p => {
                    if (p.alpha > 0) {
                        // Gradiente para part√≠culas
                        const gradient = this.ctx.createRadialGradient(
                            p.x, p.y, 0,
                            p.x, p.y, p.size
                        );
                        
                        gradient.addColorStop(0, p.color + 'FF');
                        gradient.addColorStop(0.5, p.color + 'AA');
                        gradient.addColorStop(1, p.color + '00');
                        
                        this.ctx.beginPath();
                        this.ctx.fillStyle = gradient;
                        this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        this.ctx.fill();
                        
                        // Brilho intenso no centro
                        if (p.size > 2) {
                            this.ctx.beginPath();
                            this.ctx.fillStyle = '#FFFFFF';
                            this.ctx.globalAlpha = p.alpha * 0.5;
                            this.ctx.arc(p.x, p.y, p.size * 0.3, 0, Math.PI * 2);
                            this.ctx.fill();
                            this.ctx.globalAlpha = 1;
                        }
                    }
                });
                
                // Desenhar fogos subindo
                this.fireworks.forEach(fw => {
                    // Corpo do fogo
                    const gradient = this.ctx.createLinearGradient(
                        fw.x, fw.y,
                        fw.x, fw.y + 8
                    );
                    
                    gradient.addColorStop(0, fw.color + 'FF');
                    gradient.addColorStop(1, fw.color + '00');
                    
                    this.ctx.beginPath();
                    this.ctx.fillStyle = gradient;
                    this.ctx.ellipse(fw.x, fw.y, 2, 6, 0, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Brilho
                    this.ctx.beginPath();
                    this.ctx.fillStyle = '#FFFFFF';
                    this.ctx.globalAlpha = 0.7;
                    this.ctx.arc(fw.x, fw.y, 1, 0, Math.PI * 2);
                    this.ctx.fill();
                    this.ctx.globalAlpha = 1;
                });
                
                this.ctx.globalCompositeOperation = 'source-over';
            }
            
            addTrailParticle(x, y, color) {
                if (this.particles.length >= this.config.maxParticles) return;
                
                this.particles.push({
                    x: x + (Math.random() - 0.5) * 3,
                    y: y + (Math.random() - 0.5) * 3,
                    color: color,
                    size: 1 + Math.random() * 2,
                    velocity: {
                        x: (Math.random() - 0.5) * 0.5,
                        y: Math.random() * 1
                    },
                    alpha: 0.7 + Math.random() * 0.3,
                    life: 1
                });
            }
            
            createFirework(x, targetY, color) {
                if (this.fireworks.length >= this.config.maxFireworks) return;
                
                this.fireworks.push({
                    x: x,
                    y: this.canvas.height,
                    targetY: targetY,
                    color: color,
                    speed: 3 + Math.random() * 2,
                    velocity: { x: 0, y: -8 - Math.random() * 4 },
                    angle: Math.random() * Math.PI * 2
                });
                
                // Efeito de brilho
                this.createLightEffect(x, targetY, color);
            }
            
            createLightEffect(x, y, color) {
                const overlay = document.getElementById('lightOverlay');
                overlay.style.setProperty('--mouse-x', `${x}px`);
                overlay.style.setProperty('--mouse-y', `${y}px`);
                overlay.style.opacity = '0.6';
                
                setTimeout(() => {
                    overlay.style.opacity = '0';
                }, 600);
            }
            
            explodeFirework(fw) {
                const particleCount = window.innerWidth < 768 ? 40 : 70;
                const explosionPower = 4 + Math.random() * 2;
                
                for (let i = 0; i < particleCount; i++) {
                    if (this.particles.length >= this.config.maxParticles) break;
                    
                    const angle = Math.random() * Math.PI * 2;
                    const speed = explosionPower * (0.5 + Math.random() * 0.5);
                    
                    this.particles.push({
                        x: fw.x,
                        y: fw.y,
                        color: fw.color,
                        size: 3 + Math.random() * 4,
                        velocity: {
                            x: Math.cos(angle) * speed,
                            y: Math.sin(angle) * speed
                        },
                        alpha: 1,
                        life: 1
                    });
                }
                
                // Sombreamento para explos√£o realista
                this.createExplosionShockwave(fw.x, fw.y, fw.color);
            }
            
            createExplosionShockwave(x, y, color) {
                // Adicionar part√≠culas especiais para o efeito de onda
                for (let i = 0; i < 10; i++) {
                    this.particles.push({
                        x: x,
                        y: y,
                        color: '#FFFFFF',
                        size: 1 + Math.random() * 2,
                        velocity: {
                            x: (Math.random() - 0.5) * 2,
                            y: (Math.random() - 0.5) * 2
                        },
                        alpha: 0.8,
                        life: 1
                    });
                }
            }
            
            launchRandomFirework() {
                if (!this.isActive || this.fireworks.length >= this.config.maxFireworks) return;
                
                const margin = 50;
                const x = margin + Math.random() * (this.canvas.width - 2 * margin);
                const targetY = 80 + Math.random() * (this.canvas.height * 0.4);
                const color = this.colors[Math.floor(Math.random() * this.colors.length)];
                
                this.createFirework(x, targetY, color);
            }
            
            launchInitialFireworks() {
                // Fogos iniciais mais esparsos
                setTimeout(() => this.launchRandomFirework(), 0);
                setTimeout(() => this.launchRandomFirework(), 300);
                setTimeout(() => this.launchRandomFirework(), 600);
            }
            
            launchCelebration() {
                if (!this.isActive) return;
                
                const count = window.innerWidth < 768 ? 3 : 5;
                const delay = 200;
                
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        this.launchRandomFirework();
                    }, i * delay);
                }
            }
            
            launchNow() {
                if (!this.isActive) return;
                
                const count = window.innerWidth < 768 ? 2 : 4;
                
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        this.launchRandomFirework();
                    }, i * 150);
                }
            }
            
            toggle() {
                this.isActive = !this.isActive;
                
                if (!this.isActive) {
                    // Limpar rapidamente as part√≠culas
                    this.particles = [];
                    this.fireworks = [];
                } else {
                    // Reativar com alguns fogos
                    setTimeout(() => this.launchNow(), 500);
                }
                
                return this.isActive;
            }
            
            destroy() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }
        }

        // SISTEMA DE CONVITE
        // Array atualizado com novos presentes (excluindo os j√° listados)
const gifts = [
    // ITENS J√Å EXISTENTES (mantidos)
    { id: 1, name: "Jogo de t√°buas de corte (3 pe√ßas)", icon: "fas fa-utensil-knife", category: "cozinha" },
    { id: 2, name: "Conjunto de esp√°tulas de silicone", icon: "fas fa-utensil-spoon", category: "cozinha" },
    { id: 3, name: "Escorredor de macarr√£o pr√°tico", icon: "fas fa-filter", category: "cozinha" },
    { id: 4, name: "Kit potes herm√©ticos (v√°rios tamanhos)", icon: "fas fa-box-open", category: "cozinha" },
    { id: 5, name: "Organizador de temperos", icon: "fas fa-pepper-hot", category: "cozinha" },
    { id: 7, name: "Cesto de roupa suja com divis√≥rias", icon: "fas fa-basket-shopping", category: "organiza√ß√£o" },
    { id: 8, name: "Protetor de colch√£o imperme√°vel", icon: "fas fa-bed", category: "quarto" },
    { id: 9, name: "Tapete de banheiro antiderrapante", icon: "fas fa-bath", category: "banheiro" },
    { id: 11, name: "Jogo extra de toalhas", icon: "fas fa-tshirt", category: "banheiro" },
    { id: 14, name: "Faca de chef de qualidade", icon: "fas fa-utensil-knife", category: "cozinha" },
    { id: 15, name: "Ferro de passar a vapor", icon: "fas fa-tshirt", category: "casa" },
    
    // NOVOS ITENS ADICIONADOS üî•
    // Cozinha
    { id: 16, name: "Panela de press√£o m√©dia", icon: "fas fa-temperature-high", category: "cozinha" },
    { id: 17, name: "Wok antiaderente", icon: "fas fa-stroopwafel", category: "cozinha" },
    { id: 18, name: "Ralador/Descascador multifuncional", icon: "fas fa-carrot", category: "cozinha" },
    { id: 19, name: "Balan√ßa de cozinha digital", icon: "fas fa-weight-scale", category: "cozinha" },
    { id: 20, name: "Conjunto de tigelas com tampas", icon: "fas fa-bowl-food", category: "cozinha" },
    
    // Organiza√ß√£o
    { id: 22, name: "Organizador de produtos de limpeza", icon: "fas fa-soap", category: "organiza√ß√£o" },
    
    // Quarto/Cama
    { id: 26, name: "Jogo de cama completo (cama queen)", icon: "fas fa-bed", category: "quarto" },
    { id: 27, name: "Travesseiros ortop√©dicos (2 unidades)", icon: "fas fa-user-headset", category: "quarto" },
    { id: 29, name: "Kit travesseiros decorativos", icon: "fas fa-couch", category: "decor" },
    
    // Banheiro
    { id: 30, name: "Porta-toalhas aquecido", icon: "fas fa-temperature-arrow-up", category: "banheiro" },
    { id: 31, name: "Kit organizador de banheiro (prateleiras)", icon: "fas fa-bath", category: "organiza√ß√£o" },
    
    // Eletrodom√©sticos √∫teis
    { id: 33, name: "Liquidificador potente", icon: "fas fa-blender", category: "eletro" },
    { id: 34, name: "Faqueiro el√©trico", icon: "fas fa-kitchen-set", category: "eletro" },
    { id: 35, name: "M√°quina de caf√© (c√°psulas ou press√£o)", icon: "fas fa-mug-hot", category: "eletro" },
    { id: 37, name: "Purificador de √°gua", icon: "fas fa-droplet", category: "eletro" },
    
    // Lazer/Conforto
    { id: 38, name: "Tapete para sala", icon: "fas fa-rug", category: "decor" },
    { id: 39, name: "Cortinas blackout para quarto", icon: "fas fa-window-frame", category: "decor" },
    { id: 41, name: "Soundbar ou caixa de som Bluetooth", icon: "fas fa-music", category: "lazer" },
    
    // Pr√°ticos e diferentes
    { id: 43, name: "Jogo de cama extra para visitas", icon: "fas fa-person-shelter", category: "quarto" },
    { id: 45, name: "Kit churrasco (para varanda/√°rea gourmet)", icon: "fas fa-fire-burner", category: "lazer" },
    
    // Vales-presente (√∫ltimas op√ß√µes)
    { id: 48, name: "Vale-presente Amazon/Magazine Luiza", icon: "fas fa-shopping-cart", category: "vale" }
    ];

        // Elementos DOM
        const giftGrid = document.getElementById('giftGrid');
        const mobileReservationNumber = document.getElementById('mobileReservationNumber');
        const reservationCounterMobile = document.getElementById('reservationCounterMobile');

        // Estado
        let reservedGifts = JSON.parse(localStorage.getItem('reservedGifts')) || {};
        let totalReservations = Object.keys(reservedGifts).length;
        let fireworksSystem;

        // Atualizar contador
        function updateReservationCounter() {
            totalReservations = Object.keys(reservedGifts).length;
            mobileReservationNumber.textContent = totalReservations;
            
            // Anima√ß√£o no contador
            reservationCounterMobile.classList.add('celebrate');
            setTimeout(() => {
                reservationCounterMobile.classList.remove('celebrate');
            }, 300);
        }

        // Inicializar presentes
        function initializeGifts() {
            giftGrid.innerHTML = '';
            
            gifts.forEach(gift => {
                const isReserved = reservedGifts[gift.id] || false;
                
                const giftCard = document.createElement('div');
                giftCard.className = `gift-card ${isReserved ? 'reserved' : ''}`;
                giftCard.dataset.id = gift.id;
                
                giftCard.innerHTML = `
                    <div class="gift-info">
                        <div class="gift-icon">
                            <i class="${gift.icon}"></i>
                        </div>
                        <h4 style="flex: 1; font-size: 0.95rem;">${gift.name}</h4>
                    </div>
                    <div class="btn-group">
                        ${isReserved ? 
                            `<button class="cancel-btn" data-id="${gift.id}">
                                <i class="fas fa-times"></i>
                                Desmarcar
                            </button>` : 
                            `<button class="reserve-btn" data-id="${gift.id}">
                                <i class="fas fa-gift"></i>
                                Reservar
                            </button>`
                        }
                    </div>
                `;
                
                giftGrid.appendChild(giftCard);
            });
            
            // Event listeners
            document.querySelectorAll('.reserve-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const giftId = parseInt(this.dataset.id);
                    reserveGift(giftId);
                });
            });
            
            document.querySelectorAll('.cancel-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const giftId = parseInt(this.dataset.id);
                    cancelReservation(giftId);
                });
            });
        }
        
        // Reservar presente
        function reserveGift(giftId) {
            if (!reservedGifts[giftId] && totalReservations < 10) {
                reservedGifts[giftId] = true;
                localStorage.setItem('reservedGifts', JSON.stringify(reservedGifts));
                
                initializeGifts();
                updateReservationCounter();
                fireworksSystem.launchCelebration();
                showNotification('Presente reservado! üéâ');
            } else if (totalReservations >= 10) {
                showNotification('Limite de 10 presentes atingido!', 'warning');
            }
        }
        
        // Cancelar reserva
        function cancelReservation(giftId) {
            if (reservedGifts[giftId]) {
                delete reservedGifts[giftId];
                localStorage.setItem('reservedGifts', JSON.stringify(reservedGifts));
                
                initializeGifts();
                updateReservationCounter();
                showNotification('Reserva cancelada!');
            }
        }
        
        // Notifica√ß√£o
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#10b981' : '#f59e0b'};
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                z-index: 1001;
                animation: slideIn 0.3s ease;
                font-size: 0.9rem;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
            
            // Adicionar anima√ß√µes CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(-50%) translateY(-20px); opacity: 0; }
                    to { transform: translateX(-50%) translateY(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(-50%) translateY(0); opacity: 1; }
                    to { transform: translateX(-50%) translateY(-20px); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }

        // Inicializar aplica√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar fogos
            fireworksSystem = new OptimizedFireworks();
            
            // Configurar controles mobile
            const toggleFireworksMobile = document.getElementById('toggleFireworksMobile');
            const launchFireworksMobile = document.getElementById('launchFireworksMobile');
            const fireworksIconMobile = document.getElementById('fireworksIconMobile');
            
            if (toggleFireworksMobile) {
                toggleFireworksMobile.addEventListener('click', () => {
                    const isActive = fireworksSystem.toggle();
                    fireworksIconMobile.className = isActive ? 'fas fa-fire' : 'fas fa-fire-extinguisher';
                    toggleFireworksMobile.classList.toggle('active', isActive);
                });
            }
            
            if (launchFireworksMobile) {
                launchFireworksMobile.addEventListener('click', () => {
                    fireworksSystem.launchNow();
                });
            }
            
            // Configurar controles desktop
            const toggleFireworksDesktop = document.getElementById('toggleFireworksDesktop');
            const launchFireworksDesktop = document.getElementById('launchFireworksDesktop');
            const fireworksIconDesktop = document.getElementById('fireworksIconDesktop');
            const fireworksStatusDesktop = document.getElementById('fireworksStatusDesktop');
            const desktopControls = document.getElementById('desktopControls');
            const desktopConfirmation = document.getElementById('desktopConfirmation');
            
            // Mostrar/ocultar controles baseado no dispositivo
            function updateDeviceLayout() {
                const isMobile = window.innerWidth < 768;
                
                if (isMobile) {
                    desktopControls.classList.add('hidden');
                    desktopConfirmation.classList.add('hidden');
                } else {
                    desktopControls.classList.remove('hidden');
                    desktopConfirmation.classList.remove('hidden');
                    
                    // Configurar controles desktop
                    if (toggleFireworksDesktop) {
                        toggleFireworksDesktop.addEventListener('click', () => {
                            const isActive = fireworksSystem.toggle();
                            fireworksIconDesktop.className = isActive ? 'fas fa-fire' : 'fas fa-fire-extinguisher';
                            fireworksStatusDesktop.textContent = `Fogos: ${isActive ? 'ON' : 'OFF'}`;
                        });
                    }
                    
                    if (launchFireworksDesktop) {
                        launchFireworksDesktop.addEventListener('click', () => {
                            fireworksSystem.launchNow();
                        });
                    }
                }
            }
            
            window.addEventListener('resize', updateDeviceLayout);
            updateDeviceLayout(); // Chamar inicialmente
            
            // Inicializar presentes
            initializeGifts();
            updateReservationCounter();
            
            // Adicionar clique no contador mobile
            reservationCounterMobile.addEventListener('click', () => {
                showNotification(`${totalReservations} de 10 presentes reservados`);
            });
            
            // Verificar atualiza√ß√µes peri√≥dicas
            setInterval(() => {
                try {
                    const saved = JSON.parse(localStorage.getItem('reservedGifts')) || {};
                    if (JSON.stringify(saved) !== JSON.stringify(reservedGifts)) {
                        reservedGifts = saved;
                        initializeGifts();
                        updateReservationCounter();
                    }
                } catch (e) {
                    console.error('Erro ao verificar atualiza√ß√µes:', e);
                }
            }, 1000);
            
            // Prevenir comportamento padr√£o em toques longos
            document.addEventListener('touchstart', (e) => {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // Otimizar performance em mobile
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    // Pausar fogos quando a aba n√£o est√° vis√≠vel
                    fireworksSystem.isActive = false;
                } else {
                    fireworksSystem.isActive = true;
                }
            });
        });
    </script>
</body>
</html>